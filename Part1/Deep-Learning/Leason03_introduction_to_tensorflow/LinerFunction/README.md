### 版本问题，1.x版本已经不在维护

这里的quiz是关于手写数字012的识别，tensorflow官方教程的手写数字识别可以做替换。

[初学者的 TensorFlow 2.0 教程  |  TensorFlow Core](https://tensorflow.google.cn/tutorials/quickstart/beginner?hl=zh-cn)

本次quiz里面用到了我不熟悉的softmax来分类。

- [ ] 完成test.py的todo

---
---


- Tensorflow 官方使用教程 HandWritenNum.py 

- 自动驾驶的quiz 使用改写的 tensorflow 2.0 版本的 sanbox.py（quiz和sanbox写入了这一个文件中）


### 归一化

简单来说就是，在相亲市场中，在北京拥有200平的房子和资产1800000元的受欢迎度不一样。

我们靠归一化来避免不同单位之间数值过大导致的梯度过大，只能设置学习率为非常小导致的训练慢的问题。

##### 解释

好的！我将通过一个简单的机器学习示例，展示不使用归一化和使用归一化的差异，并解释可能出现的问题及解决方案。

---

### **示例背景**
假设我们要用两个特征预测房价：
- **特征1：房间数量**（范围：1-5，单位是"间"）
- **特征2：房屋面积**（范围：80-500，单位是"平方米"）

目标变量是房价（单位：万元）。我们使用梯度下降法训练一个线性回归模型。

---

### **1. 不使用归一化的问题**

#### **数据示例**
| 房间数量 | 房屋面积 | 房价 |
|----------|----------|------|
| 2        | 80       | 100  |
| 4        | 200      | 300  |
| 5        | 500      | 600  |

#### **问题分析**
1. **特征量纲差异巨大**：
   - 房间数量：1-5
   - 房屋面积：80-500
   房屋面积的数值比房间数量大数十倍到数百倍。

2. **梯度下降不稳定**：
   - 损失函数对房屋面积的权重（比如 `w2`）的梯度会远大于对房间数量的权重（比如 `w1`）的梯度。
   - 例如，梯度公式为：
     \[
     \frac{\partial \text{Loss}}{\partial w_1} = \sum (预测值 - 真实值) \cdot 房间数量 \\
     \frac{\partial \text{Loss}}{\partial w_2} = \sum (预测值 - 真实值) \cdot 房屋面积
     \]
     由于房屋面积远大于房间数量，梯度 `∂Loss/∂w2` 会主导权重更新。

3. **模型偏向大数值特征**：
   - 模型会认为房屋面积比房间数量更重要，即使实际业务中房间数量可能对房价的影响更大。

4. **收敛速度慢**：
   - 需要极小的学习率才能避免权重震荡，导致训练时间大幅增加。

---

### **2. 使用归一化解决问题**

#### **归一化方法（以 Min-Max 归一化为例）**
将特征缩放到 [0, 1] 范围内：
$$x_{\text{norm}} = \frac{x - x_{\min}}{x_{\max} - x_{\min}}$$


#### **归一化后的数据**
| 房间数量（原始） | 房屋面积（原始） | 房间数量（归一化） | 房屋面积（归一化） | 房价 |
|------------------|------------------|--------------------|--------------------|------|
| 2                | 80               | 0.25               | 0.0                | 100  |
| 4                | 200              | 0.75               | 0.29               | 300  |
| 5                | 500              | 1.0                | 1.0                | 600  |

#### **归一化的优势**
1. **消除量纲差异**：
   - 房间数量和房屋面积的数值范围统一为 [0, 1]，梯度计算时权重更新方向更均衡。

2. **加速收敛**：
   - 梯度下降可以更快找到最优解，且可以使用更大的学习率。

3. **提高模型性能**：
   - 模型不再偏向某个特征，能更公平地利用所有特征的信息。

---

### **3. 对比实验**

#### **实验设置**
- 线性回归模型，学习率 `η = 0.01`，迭代 100 次。
- 权重初始化为 `w1 = 0.1`, `w2 = 0.1`, `b = 0`.

#### **结果对比**
| 指标               | 不使用归一化             | 使用归一化                 |
|--------------------|--------------------------|----------------------------|
| 损失函数下降曲线   | 震荡严重，收敛慢         | 平滑快速下降               |
| 最终权重值         | `w1 ≈ 0.01`, `w2 ≈ 1.2` | `w1 ≈ 0.5`, `w2 ≈ 0.6`    |
| 业务解释性         | 房屋面积权重虚高         | 权重反映真实特征重要性     |

---

### **总结**
- **不归一化的问题**：梯度不稳定、模型偏向大数值特征、收敛慢。
- **归一化的作用**：平衡特征量纲、加速训练、提升模型性能。

通过归一化，我们让不同特征在模型中“公平竞争”，使机器学习算法更高效地学习数据规律。